<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">

<!-- ðŸ”‘ ESSENCIAL PARA MOBILE FULLSCREEN -->
<meta name="viewport"
      content="width=device-width,
               height=device-height,
               initial-scale=1.0,
               maximum-scale=1.0,
               user-scalable=no">

<title>PARIDADE</title>

<style>
/* RESET */
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}

/* BODY FULLSCREEN */
body {
    background:#0f0f0f;
    color:#ffffff;
    font-family: Arial, sans-serif;

    display:flex;
    justify-content:center;
    align-items:center;

    min-height:100dvh;
    overscroll-behavior: none;
    touch-action: manipulation;
}

/* CONTAINER DO JOGO */
.game {
    width:100%;
    max-width:480px;
    padding:12px;
    box-sizing:border-box;
    text-align:center;
}

/* TABULEIRO */
#board {
    display:grid;
    gap:min(2vw, 8px);
    margin:16px auto;
}

/* CÃ‰LULAS */
.cell {
    width:min(18vw, 60px);
    height:min(18vw, 60px);
    background:#1e1e1e;
    border-radius:10px;
    cursor:pointer;
    transition:background 0.15s;
}

/* ATIVO */
.cell.on {
    background:#2ecc71;
}

/* TEXTO */
.info {
    font-size:16px;
    margin-bottom:8px;
}

/* BOTÃƒO */
button {
    padding:8px 14px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:#333;
    color:#fff;
    font-size:14px;
}

button:active {
    background:#444;
}
</style>
</head>
<body>

<div class="game">
    <h2>PARIDADE</h2>

    <div class="info">
        Fase <b id="level">1</b> Â· Movimentos <b id="moves">0</b>
    </div>

    <div id="board"></div>

    <button onclick="reset()">Reiniciar Fase</button>
</div>

<script>
/* ===============================
   FASES DESENHADAS Ã€ MÃƒO
================================ */
const levels = [
    [
        [0,1,0],
        [1,1,1],
        [0,1,0]
    ],
    [
        [1,0,1],
        [0,1,0],
        [1,0,1]
    ],
    [
        [1,1,0,1],
        [0,1,1,0],
        [1,1,0,1],
        [0,0,1,0]
    ],
    [
        [0,1,1,0],
        [1,0,0,1],
        [1,0,0,1],
        [0,1,1,0]
    ]
];

let level = 0;
let board = [];
let moves = 0;

const boardEl = document.getElementById("board");
const movesEl = document.getElementById("moves");
const levelEl = document.getElementById("level");

/* ===============================
   CARREGAR FASE
================================ */
function loadLevel() {
    board = levels[level].map(row => row.slice());
    moves = 0;

    levelEl.textContent = level + 1;
    movesEl.textContent = moves;

    boardEl.style.gridTemplateColumns =
        `repeat(${board[0].length}, min(18vw, 60px))`;

    render();
}

/* ===============================
   RENDER
================================ */
function render() {
    boardEl.innerHTML = "";

    board.forEach((row, y) => {
        row.forEach((value, x) => {
            const cell = document.createElement("div");
            cell.className = "cell" + (value ? " on" : "");
            cell.onclick = () => clickCell(x, y);
            boardEl.appendChild(cell);
        });
    });

    movesEl.textContent = moves;

    if (checkWin()) {
        setTimeout(() => {
            alert("âœ” Fase concluÃ­da");
            level++;
            if (level >= levels.length) {
                alert("ðŸŽ‰ VocÃª concluiu todos os desafios!");
                level = 0;
            }
            loadLevel();
        }, 150);
    }
}

/* ===============================
   MECÃ‚NICA
================================ */
function toggle(x, y) {
    if (
        x < 0 ||
        y < 0 ||
        y >= board.length ||
        x >= board[0].length
    ) return;

    board[y][x] = board[y][x] ? 0 : 1;
}

function clickCell(x, y) {
    moves++;
    toggle(x, y);
    toggle(x+1, y);
    toggle(x-1, y);
    toggle(x, y+1);
    toggle(x, y-1);
    render();
}

/* ===============================
   WIN
================================ */
function checkWin() {
    return board.every(row => row.every(v => v === 0));
}

/* ===============================
   RESET
================================ */
function reset() {
    loadLevel();
}

/* START */
loadLevel();
</script>

</body>
</html>
